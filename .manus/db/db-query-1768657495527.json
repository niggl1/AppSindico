{
  "query": "\nCREATE TABLE IF NOT EXISTS revista_visualizacoes (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  revistaId INT NOT NULL,\n  usuarioId INT,\n  secaoId VARCHAR(50),\n  paginaNumero INT,\n  tempoLeitura INT,\n  dispositivo VARCHAR(50),\n  navegador VARCHAR(100),\n  ipHash VARCHAR(64),\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  FOREIGN KEY (revistaId) REFERENCES revistas(id),\n  FOREIGN KEY (usuarioId) REFERENCES users(id)\n);\n\nCREATE TABLE IF NOT EXISTS revista_comentarios (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  revistaId INT NOT NULL,\n  usuarioId INT,\n  moradorId INT,\n  secaoId VARCHAR(50) NOT NULL,\n  secaoTipo VARCHAR(50),\n  texto TEXT NOT NULL,\n  status ENUM('pendente', 'aprovado', 'rejeitado') DEFAULT 'pendente',\n  moderadoPor INT,\n  dataModeracao TIMESTAMP,\n  motivoRejeicao TEXT,\n  parentId INT,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  FOREIGN KEY (revistaId) REFERENCES revistas(id),\n  FOREIGN KEY (usuarioId) REFERENCES users(id),\n  FOREIGN KEY (moradorId) REFERENCES moradores(id),\n  FOREIGN KEY (moderadoPor) REFERENCES users(id)\n);\n\nCREATE TABLE IF NOT EXISTS revista_agendamentos (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  revistaId INT NOT NULL,\n  dataPublicacao TIMESTAMP NOT NULL,\n  status ENUM('agendado', 'publicado', 'cancelado', 'erro') DEFAULT 'agendado',\n  notificarMoradores BOOLEAN DEFAULT TRUE,\n  notificarEmail BOOLEAN DEFAULT TRUE,\n  notificarPush BOOLEAN DEFAULT TRUE,\n  mensagemNotificacao TEXT,\n  dataExecucao TIMESTAMP,\n  erroMensagem TEXT,\n  criadoPor INT,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  FOREIGN KEY (revistaId) REFERENCES revistas(id),\n  FOREIGN KEY (criadoPor) REFERENCES users(id)\n);\n\nCREATE TABLE IF NOT EXISTS revista_assinantes (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  condominioId INT NOT NULL,\n  nome VARCHAR(255) NOT NULL,\n  email VARCHAR(255),\n  whatsapp VARCHAR(20),\n  unidade VARCHAR(50),\n  receberEmail BOOLEAN DEFAULT TRUE,\n  receberWhatsapp BOOLEAN DEFAULT FALSE,\n  receberPush BOOLEAN DEFAULT TRUE,\n  ativo BOOLEAN DEFAULT FALSE,\n  dataAtivacao TIMESTAMP,\n  ativadoPor INT,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  FOREIGN KEY (condominioId) REFERENCES condominios(id),\n  FOREIGN KEY (ativadoPor) REFERENCES users(id)\n);\n",
  "command": "mysql --batch --raw --column-names --default-character-set=utf8mb4 --host gateway02.us-east-1.prod.aws.tidbcloud.com --port 4000 --user 4BJigjDSHDXY3fo.3a8343122767 --database FKCZX4UNP9ayQib2iMPF73 --execute \nCREATE TABLE IF NOT EXISTS revista_visualizacoes (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  revistaId INT NOT NULL,\n  usuarioId INT,\n  secaoId VARCHAR(50),\n  paginaNumero INT,\n  tempoLeitura INT,\n  dispositivo VARCHAR(50),\n  navegador VARCHAR(100),\n  ipHash VARCHAR(64),\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  FOREIGN KEY (revistaId) REFERENCES revistas(id),\n  FOREIGN KEY (usuarioId) REFERENCES users(id)\n);\n\nCREATE TABLE IF NOT EXISTS revista_comentarios (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  revistaId INT NOT NULL,\n  usuarioId INT,\n  moradorId INT,\n  secaoId VARCHAR(50) NOT NULL,\n  secaoTipo VARCHAR(50),\n  texto TEXT NOT NULL,\n  status ENUM('pendente', 'aprovado', 'rejeitado') DEFAULT 'pendente',\n  moderadoPor INT,\n  dataModeracao TIMESTAMP,\n  motivoRejeicao TEXT,\n  parentId INT,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  FOREIGN KEY (revistaId) REFERENCES revistas(id),\n  FOREIGN KEY (usuarioId) REFERENCES users(id),\n  FOREIGN KEY (moradorId) REFERENCES moradores(id),\n  FOREIGN KEY (moderadoPor) REFERENCES users(id)\n);\n\nCREATE TABLE IF NOT EXISTS revista_agendamentos (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  revistaId INT NOT NULL,\n  dataPublicacao TIMESTAMP NOT NULL,\n  status ENUM('agendado', 'publicado', 'cancelado', 'erro') DEFAULT 'agendado',\n  notificarMoradores BOOLEAN DEFAULT TRUE,\n  notificarEmail BOOLEAN DEFAULT TRUE,\n  notificarPush BOOLEAN DEFAULT TRUE,\n  mensagemNotificacao TEXT,\n  dataExecucao TIMESTAMP,\n  erroMensagem TEXT,\n  criadoPor INT,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  FOREIGN KEY (revistaId) REFERENCES revistas(id),\n  FOREIGN KEY (criadoPor) REFERENCES users(id)\n);\n\nCREATE TABLE IF NOT EXISTS revista_assinantes (\n  id INT AUTO_INCREMENT PRIMARY KEY,\n  condominioId INT NOT NULL,\n  nome VARCHAR(255) NOT NULL,\n  email VARCHAR(255),\n  whatsapp VARCHAR(20),\n  unidade VARCHAR(50),\n  receberEmail BOOLEAN DEFAULT TRUE,\n  receberWhatsapp BOOLEAN DEFAULT FALSE,\n  receberPush BOOLEAN DEFAULT TRUE,\n  ativo BOOLEAN DEFAULT FALSE,\n  dataAtivacao TIMESTAMP,\n  ativadoPor INT,\n  createdAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP NOT NULL,\n  updatedAt TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP NOT NULL,\n  FOREIGN KEY (condominioId) REFERENCES condominios(id),\n  FOREIGN KEY (ativadoPor) REFERENCES users(id)\n);\n",
  "rows": [],
  "messages": [],
  "stdout": "",
  "stderr": "",
  "execution_time_ms": 903
}